{"ast":null,"code":"import _slicedToArray from\"/Users/sj2/gitDesk/RespBlog/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Link,useNavigate,useLocation}from\"react-router-dom\";import{Layout,Image,Typography,Button,Avatar}from\"antd\";import Logo from\"../../images/Instaverse.png\";import{useDispatch}from\"react-redux\";import{LOGOUT}from\"../../constants/actionTypes\";import decode from'jwt-decode';import styles from'./styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Title=Typography.Title;var Header=Layout.Header;export default function AppBar(){var _user$result,_user$result$username,_user$result$username2,_user$result2;var dispatch=useDispatch();var navigate=useNavigate();var location=useLocation();var _useState=useState(JSON.parse(localStorage.getItem(\"profile\"))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];useEffect(function(){var token=user===null||user===void 0?void 0:user.token;if(token){var decodedToken=decode(token);if(decodedToken.exp*1000<new Date().getTime())logout();}setUser(JSON.parse(localStorage.getItem(\"profile\")));},[location]);var logout=function logout(){dispatch({type:LOGOUT});navigate(\"/authform\");// redirect to login page\nsetUser(null);};return/*#__PURE__*/_jsxs(Header,{style:styles.header,children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsxs(\"div\",{style:styles.homeLink,children:[/*#__PURE__*/_jsx(Image,{style:styles.image,preview:false,src:Logo,width:45}),\"\\xA0\",/*#__PURE__*/_jsx(Title,{style:styles.title,children:\"PHOSTING\"})]})}),!user?/*#__PURE__*/_jsx(Link,{to:\"/authform\",children:/*#__PURE__*/_jsx(Button,{htmlType:\"button\",style:styles.login,children:\"Log In\"})}):/*#__PURE__*/_jsxs(\"div\",{style:styles.userInfo,children:[/*#__PURE__*/_jsx(Avatar,{style:styles.avatar,alt:\"username\",size:\"large\",children:user===null||user===void 0?void 0:(_user$result=user.result)===null||_user$result===void 0?void 0:(_user$result$username=_user$result.username)===null||_user$result$username===void 0?void 0:(_user$result$username2=_user$result$username.charAt(0))===null||_user$result$username2===void 0?void 0:_user$result$username2.toUpperCase()}),/*#__PURE__*/_jsx(Title,{style:styles.title,level:4,children:user===null||user===void 0?void 0:(_user$result2=user.result)===null||_user$result2===void 0?void 0:_user$result2.username}),/*#__PURE__*/_jsx(Button,{onClick:logout,htmlType:\"button\",children:\"Log Out\"})]})]});}","map":{"version":3,"sources":["/Users/sj2/gitDesk/RespBlog/client/src/components/AppBar/AppBar.jsx"],"names":["React","useState","useEffect","Link","useNavigate","useLocation","Layout","Image","Typography","Button","Avatar","Logo","useDispatch","LOGOUT","decode","styles","Title","Header","AppBar","dispatch","navigate","location","JSON","parse","localStorage","getItem","user","setUser","token","decodedToken","exp","Date","getTime","logout","type","header","homeLink","image","title","login","userInfo","avatar","result","username","charAt","toUpperCase"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, useNavigate, useLocation } from \"react-router-dom\";\nimport { Layout, Image, Typography, Button, Avatar } from \"antd\";\nimport Logo from \"../../images/Instaverse.png\";\nimport { useDispatch } from \"react-redux\";\nimport { LOGOUT } from \"../../constants/actionTypes\";\nimport decode from 'jwt-decode';\n\nimport styles from './styles';\n\nconst { Title } = Typography;\nconst { Header } = Layout;\n\nexport default function AppBar() {\n    const dispatch = useDispatch();\n    const navigate = useNavigate();\n    const location = useLocation();\n\n    const [user, setUser] = useState(JSON.parse(localStorage.getItem(\"profile\")));\n\n    useEffect(() => {\n        const token = user?.token;\n\n        if (token) {\n            const decodedToken = decode(token);\n            if (decodedToken.exp * 1000 < new Date().getTime()) logout();\n        }\n\n        setUser(JSON.parse(localStorage.getItem(\"profile\")));\n    }, [location]);\n\n    const logout = () => {\n        dispatch({ type: LOGOUT });\n        navigate(\"/authform\"); // redirect to login page\n        setUser(null);\n    }\n\n    return (\n        <Header style={styles.header}>\n            <Link to=\"/\">\n                <div style={styles.homeLink}>\n                    <Image  style={styles.image} preview={false} src={Logo} width={45} />\n                    &nbsp;\n                    <Title  style={styles.title}>PHOSTING</Title>\n                </div>\n            </Link>\n            {!user ? (\n                <Link to=\"/authform\">\n                    <Button htmlType='button' style={styles.login}>\n                        Log In\n                    </Button>\n                </Link>\n            ): (\n                <div style={styles.userInfo}>\n                    <Avatar style={styles.avatar} alt=\"username\" size=\"large\">\n                        {user?.result?.username?.charAt(0)?.toUpperCase()}\n                    </Avatar>\n                    <Title style={styles.title} level={4}>\n                        {user?.result?.username}\n                    </Title>\n                    <Button onClick={logout} htmlType='button'>\n                        Log Out\n                    </Button>\n                </div>\n            )}\n        </Header>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}