{"ast":null,"code":"import _slicedToArray from\"/Users/sj2/gitDesk/RespBlog/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{Card,Tooltip,Typography,Image}from\"antd\";import{EditOutlined,DeleteTwoTone,HeartTwoTone}from\"@ant-design/icons\";import{useDispatch}from\"react-redux\";import moment from'moment';import styles from'./styles';import{deleteStory,likeStory}from'../../actions/stories';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Meta=Card.Meta;var Link=Typography.Link,Paragraph=Typography.Paragraph,Text=Typography.Text;function Story(_ref){var _user$result;var story=_ref.story,setSelectedId=_ref.setSelectedId;var dispatch=useDispatch();var _useState=useState(true),_useState2=_slicedToArray(_useState,2),expand=_useState2[0],setExpand=_useState2[1];var user=JSON.parse(localStorage.getItem(\"profile\"));var cardActions=[/*#__PURE__*/_jsx(\"div\",{style:styles.actions,children:/*#__PURE__*/_jsxs(Tooltip,{placement:\"top\",title:\"Like\",color:\"magenta\",onClick:function onClick(){dispatch(likeStory(story._id));},children:[/*#__PURE__*/_jsx(HeartTwoTone,{twoToneColor:\"magenta\"}),\"\\xA0 \",story.likes.length,\" \\xA0\"]})}),/*#__PURE__*/_jsx(Tooltip,{placement:\"top\",title:\"Edit\",children:/*#__PURE__*/_jsx(EditOutlined,{onClick:function onClick(){setSelectedId(story._id);}})}),/*#__PURE__*/_jsx(Tooltip,{placement:\"top\",title:\"Delete\",color:\"red\",children:/*#__PURE__*/_jsx(DeleteTwoTone,{twoToneColor:\"red\",onClick:function onClick(){return dispatch(deleteStory(story._id));}})})];return/*#__PURE__*/_jsxs(Card,{style:styles.card,cover:/*#__PURE__*/_jsx(Image,{src:story.image}),actions:(user===null||user===void 0?void 0:(_user$result=user.result)===null||_user$result===void 0?void 0:_user$result._id)===(story===null||story===void 0?void 0:story.userId)?cardActions:user!==null&&user!==void 0&&user.result?cardActions.slice(0,1):null,children:[/*#__PURE__*/_jsx(Meta,{title:story.username}),/*#__PURE__*/_jsx(Paragraph,{style:{margin:0},ellipsis:{rows:2,expandable:true,symbol:\"more\",onExpand:function onExpand(){setExpand(true);},onEllipsis:function onEllipsis(){setExpand(false);}},children:story.caption}),expand?/*#__PURE__*/_jsx(Link,{href:\"#\",children:story.tags.split(\" \").map(function(tag){return\"#\".concat(tag,\" \");})}):null,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Text,{type:\"secondary\",children:moment(story.postDate).fromNow()})]});}export default Story;","map":{"version":3,"sources":["/Users/sj2/gitDesk/RespBlog/client/src/components/Story/Story.jsx"],"names":["React","useState","Card","Tooltip","Typography","Image","EditOutlined","DeleteTwoTone","HeartTwoTone","useDispatch","moment","styles","deleteStory","likeStory","Meta","Link","Paragraph","Text","Story","story","setSelectedId","dispatch","expand","setExpand","user","JSON","parse","localStorage","getItem","cardActions","actions","_id","likes","length","card","image","result","userId","slice","username","margin","rows","expandable","symbol","onExpand","onEllipsis","caption","tags","split","map","tag","postDate","fromNow"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Card, Tooltip, Typography, Image } from \"antd\";\nimport { EditOutlined, DeleteTwoTone, HeartTwoTone } from \"@ant-design/icons\";\nimport { useDispatch } from \"react-redux\";\nimport moment from 'moment';\nimport styles from './styles';\nimport { deleteStory, likeStory } from '../../actions/stories';\n\nconst { Meta } = Card;\nconst { Link, Paragraph, Text } = Typography;\n\nfunction Story({ story, setSelectedId }) {\n  const dispatch = useDispatch();\n  const [expand, setExpand] = useState(true);\n\n  const user = JSON.parse(localStorage.getItem(\"profile\"));\n\n  const cardActions = [\n    <div style={styles.actions}>\n      <Tooltip\n        placement='top'\n        title='Like'\n        color='magenta'\n        onClick={() => { dispatch(likeStory(story._id)) }}\n      >\n        <HeartTwoTone twoToneColor=\"magenta\" />\n        &nbsp; {story.likes.length} &nbsp;\n      </Tooltip>\n    </div>,\n    <Tooltip\n      placement='top'\n      title='Edit'\n    >\n      <EditOutlined onClick={() => {\n        setSelectedId(story._id);\n      }} />\n    </Tooltip>,\n    <Tooltip\n      placement='top'\n      title='Delete'\n      color='red'\n    >\n      <DeleteTwoTone twoToneColor=\"red\" onClick={() => dispatch(deleteStory(story._id))} />\n    </Tooltip>\n  ];\n\n  return (\n    <Card\n      style={styles.card}\n      cover={<Image src={story.image} />}\n      actions={\n        user?.result?._id === story?.userId ?\n          cardActions :\n          user?.result ?\n            cardActions.slice(0, 1)\n            : null\n      }\n    >\n      <Meta title={story.username} />\n      <Paragraph\n        style={{ margin: 0 }}\n        ellipsis={{\n          rows: 2,\n          expandable: true,\n          symbol: \"more\",\n          onExpand: () => {\n            setExpand(true);\n          },\n          onEllipsis: () => {\n            setExpand(false);\n          }\n        }}\n      >\n        {story.caption}\n      </Paragraph>\n      {expand ?\n        <Link href=\"#\">{story.tags.split(\" \").map((tag) => `#${tag} `)}</Link>\n        : null }\n        <br />\n        <Text type=\"secondary\">{moment(story.postDate).fromNow()}</Text>\n    </Card>\n  )\n}\n\nexport default Story"]},"metadata":{},"sourceType":"module"}